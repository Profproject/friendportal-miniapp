<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FriendPortal</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
*{box-sizing:border-box}
html,body{
margin:0;padding:0;width:100%;height:100%;
min-height:100vh;  
font-family:-apple-system,BlinkMacSystemFont,sans-serif;
background:#000;overflow:hidden
}
.app{
position:relative;width:100%;max-width:480px;
height:100vh;margin:0 auto;
background:url("bg.png") center top/cover no-repeat;
overflow:hidden
}

/* COINS */
.coin{
position:absolute;
width:70px;height:70px;
object-fit:contain;
pointer-events:none;
z-index:1
}

/* BUTTONS */
.buttons{
position:absolute;bottom:20px;left:0;width:100%;
padding:0 16px;display:flex;flex-direction:column;
gap:10px;z-index:5
}
.btn-img{display:flex;cursor:pointer;-webkit-tap-highlight-color:transparent}
.btn-img.left{justify-content:flex-start}
.btn-img.right{justify-content:flex-end}
.btn-img img{
max-width:250px;width:100%;
border-radius:18px;
transition:transform .12s,filter .12s
}
.btn-img.pressed img{
transform:translateY(6px) scale(.94);
filter:brightness(.85)
}

/* MODALS */
.modal{
position:fixed;inset:0;display:none;
align-items:center;justify-content:center;
background:rgba(0,0,0,.65);
backdrop-filter:blur(6px);z-index:20
}
.modal-content{
width:90%;max-height:85%;overflow:auto;
background:linear-gradient(180deg,#111,#1b1b1b);
border-radius:22px;padding:22px;color:#fff
}
.modal-content h2{color:#ffd87a}
.modal-content h3{margin-top:18px;font-size:20px}
.modal-content p{font-size:16px;opacity:.9;line-height:1.6}
.modal-content input{
width:100%;padding:12px;border-radius:12px;border:none;margin-top:10px
}
.modal-content button{
margin-top:14px;width:100%;padding:14px;
border-radius:14px;border:none;
background:linear-gradient(180deg,#4e6cff,#2f46ff);
color:#fff;font-size:16px
}

/* CLOSE BUTTON */
.btn-close{
background:linear-gradient(180deg,#ff5a5a,#d93434)!important;
box-shadow:0 6px 14px rgba(255,90,90,.35);
}
.btn-close:active{
transform:translateY(4px) scale(.96);
filter:brightness(.9);
}

/* WARNING */
.warning{
color:#ff5a5a;
font-weight:700;
font-size:16px;
margin-top:10px
}

/* SOUND */
#soundToggle{
position:absolute;bottom:12px;right:12px;
z-index:30;font-size:22px;
background:rgba(0,0,0,.6);
padding:10px;border-radius:50%
}
#headerAd{
  position:absolute;
  top:64px; /* Ğ½Ğ¸Ğ¶Ğµ Telegram-ÑˆĞ°Ğ¿ĞºĞ¸ */
  left:0;
  width:100%;
  height:80px;
  z-index:25;
  pointer-events:none;
}  
</style>
</head>

<body>
<div class="app">
<!-- TOP BANNER AD -->
<div id="headerAd"></div>

<audio id="clickSound" src="click.mp3" preload="auto"></audio>
<audio id="bgMusic" src="bg.mp3" preload="auto" loop></audio>
<div id="soundToggle" onclick="toggleSound()">ğŸ”Š</div>

<!-- COINS -->
<img src="coin1.png" class="coin">
<img src="coin13.png" class="coin">
<img src="coin94.png" class="coin">
<img src="coin108.png" class="coin">
<img src="coin216.png" class="coin">

<!-- BUTTONS -->
<div class="buttons">
<div class="btn-img left" onclick="press(this);invite()"><img src="inv.png"></div>
<div class="btn-img right" onclick="press(this);openBalance()"><img src="bal.png"></div>
<div class="btn-img left" onclick="press(this);openWithdraw()"><img src="wit.png"></div>
<div class="btn-img right" onclick="press(this);getStats()"><img src="sta.png"></div>
<div class="btn-img left" onclick="press(this);openHow()"><img src="how.png"></div>
<div class="btn-img right" onclick="press(this);payActivate()"><img src="act.png"></div>
<div class="btn-img left" onclick="press(this);openAds()"><img src="for.png"></div>
</div>

<!-- HOW IT WORKS -->
<div class="modal" id="howModal">
<div class="modal-content">
<h2>ğŸš€ FriendPortal Ecosystem</h2>

<p>
<b>FriendPortal</b> is a premium referral & advertising ecosystem built on TON,
designed for <b>real users, organic growth and long-term exposure</b>.
</p>

<hr>

<h3>ğŸ‘¥ For Users</h3>
<ul>
<li>Invite new users and grow your referral network</li>
<li>Earn TON rewards from <b>two referral levels</b></li>
<li>Instant balance updates and fast withdrawals</li>
</ul>

<p><b>Referral Rewards</b></p>
<ul>
<li>ğŸ¥‡ Level 1 â€” <b>0.5 TON</b></li>
<li>ğŸ¥ˆ Level 2 â€” <b>0.25 TON</b></li>
</ul>

<hr>

<h3>ğŸ“£ For Advertisers</h3>
<p>
FriendPortal provides <b>direct access to an active crypto-native audience</b>
inside a Telegram Mini App environment.
</p>
<ul>
<li>ğŸš€ Real users only â€” no bots</li>
<li>ğŸ¯ High engagement & premium visibility</li>
<li>ğŸ“ˆ Constant organic traffic growth</li>
</ul>

<p><b>Advertising Packages</b></p>
<ul>
<li>ğŸ¯ <b>25 TON</b> â€” One-time broadcast</li>
<li>â­ï¸ <b>75 TON</b> â€” Top placement for 7 days</li>
<li>ğŸ‘‘ <b>250 TON</b> â€” VIP top placement for 30 days</li>
</ul>

<hr>

<h3>ğŸ›  Support & Development</h3>
<p>
For advertising inquiries or custom Telegram Mini App development,
please contact our support team.
</p>
<p>
We design and develop <b>Telegram Mini Apps of any complexity</b>,
with modern UI, animations and scalable backend solutions.
</p>
<p>
ğŸ‘‰ <a href="https://t.me/FPSupportOnline" target="_blank" style="color:#4e6cff">
<b>@FPSupportOnline</b>
</a>
</p>

<button class="btn-close" onclick="closeHow()">Close</button>
</div>
</div>

<!-- BALANCE -->
<div class="modal" id="balanceModal">
<div class="modal-content">
<h2>ğŸ’° Balance Overview</h2>

<div style="padding:14px;border-radius:14px;background:rgba(255,255,255,.05)">
<p>ğŸ’ <b>Available balance</b></p>
<h3 id="balAmount">â€”</h3>
</div>

<div style="margin-top:12px;padding:14px;border-radius:14px;background:rgba(255,255,255,.05)">
<p>ğŸ”“ <b>Activation status</b></p>
<h3 id="balActive">â€”</h3>
</div>

<button class="btn-close" onclick="closeBalance()">Close</button>
</div>
</div>

<!-- WITHDRAW -->
<div class="modal" id="withdrawModal">
<div class="modal-content">
<h2>ğŸ’¸ Withdraw Request</h2>
<input id="wAddress" placeholder="TON wallet address">
<input id="wMemo" placeholder="MEMO (if required)">
<div class="warning">
âš ï¸ IMPORTANT: If your wallet requires MEMO and you do not include it,
your funds may be permanently lost.
</div>
<button onclick="sendWithdraw()">Send request</button>
<button class="btn-close" onclick="closeWithdraw()">Close</button>
</div>
</div>

<!-- ADS -->
<div class="modal" id="adsModal">
<div class="modal-content">
<h2>ğŸ“£ Advertising Packages</h2>

<h3>ğŸ¯ 25 TON â€” One-time Broadcast</h3>
<p>
Instant broadcast sent to all active users.
Perfect for launches, announcements and fast traffic.
</p>
<input id="ad25" placeholder="Link to promote">
<button onclick="buyAd(25,ad25.value)">Pay 25 TON</button>

<hr>

<h3>â­ï¸ 75 TON â€” TOP Promotion (7 Days)</h3>
<p>
Highlighted top placement inside the mini app for 7 days.
Ideal for steady exposure and brand awareness.
</p>
<input id="ad75" placeholder="Link to promote">
<button onclick="buyAd(75,ad75.value)">Pay 75 TON</button>

<hr>

<h3>ğŸ‘‘ 250 TON â€” VIP TOP (30 Days)</h3>
<p>
Maximum visibility and priority placement for 30 days.
Designed for serious projects and long-term growth.
</p>
<input id="ad250" placeholder="Link to promote">
<button onclick="buyAd(250,ad250.value)">Pay 250 TON</button>

<button class="btn-close" onclick="closeAds()">Close</button>
</div>
</div>

<!-- STATS -->
<div class="modal" id="statsModal">
<div class="modal-content" id="statsContent"></div>
</div>

<script>
const API="https://loyce-taxitic-elenora.ngrok-free.dev";
const BOT="FriendPortal_bot";
const tg=Telegram.WebApp;tg.expand();tg.ready();  
const user_id=tg.initDataUnsafe?.user?.id;

/* SOUND */
const clickSound=document.getElementById("clickSound");
const bgMusic=document.getElementById("bgMusic");
clickSound.volume=0.9;bgMusic.volume=0.25;
let sound=true,unlocked=false;
document.addEventListener("pointerdown",()=>{if(!unlocked){unlocked=true;bgMusic.play().catch(()=>{});}});
function playClick(){if(!sound)return;clickSound.currentTime=0;clickSound.play().catch(()=>{});}
function toggleSound(){sound=!sound;sound?bgMusic.play():bgMusic.pause();}

/* COINS */
const app=document.querySelector(".app");
const coins=document.querySelectorAll(".coin");
const size=70,rad=35;
let W=app.clientWidth,H=app.clientHeight;
const d=[...coins].map(()=>({x:Math.random()*(W-size)+rad,y:Math.random()*(H-size)+rad,vx:1+Math.random(),vy:1+Math.random()}));
(function anim(){
W=app.clientWidth;H=app.clientHeight;
coins.forEach((c,i)=>{
let o=d[i];o.x+=o.vx;o.y+=o.vy;
if(o.x-rad<=0||o.x+rad>=W)o.vx*=-1;
if(o.y-rad<=0||o.y+rad>=H)o.vy*=-1;
c.style.transform=`translate(${o.x-rad}px,${o.y-rad}px)`;
});
requestAnimationFrame(anim);
})();

/* ACTIONS */
function press(el){playClick();el.classList.add("pressed");setTimeout(()=>el.classList.remove("pressed"),120);}
function invite(){
const link=`https://t.me/${BOT}?startapp=${user_id}`;
tg.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(link)}`);
}
function openHow(){howModal.style.display="flex"}
function closeHow(){howModal.style.display="none"}
function openWithdraw(){withdrawModal.style.display="flex"}
function closeWithdraw(){withdrawModal.style.display="none"}
function openAds(){adsModal.style.display="flex"}
function closeAds(){adsModal.style.display="none"}
function closeBalance(){balanceModal.style.display="none"}

async function openBalance(){
const r=await fetch(API+"/balance",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id})});
const d=await r.json();
balAmount.textContent=d.balance+" TON";
balActive.textContent=d.activated;
balanceModal.style.display="flex";
}

async function getStats(){
statsModal.style.display="flex";
const r=await fetch(API+"/stats",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id})});
const d=await r.json();
statsContent.innerHTML=`
<h2>ğŸ“Š Statistics Overview</h2>
<p>ğŸ‘¥ Level 1 referrals: <b>${d.level1}</b></p>
<p>ğŸ‘¥ Level 2 referrals: <b>${d.level2}</b></p>
<p>ğŸ’ Total earned: <b>${d.earned} TON</b></p>
<button class="btn-close" onclick="statsModal.style.display='none'">Close</button>`;
}

function payActivate(){
fetch(API+"/pay",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id,amount:1})})
.then(r=>r.json()).then(d=>Telegram.WebApp.openTelegramLink(d.pay_url));
}

async function sendWithdraw(){
const r = await fetch(API+"/withdraw",{
  method:"POST",
  headers:{'Content-Type':'application/json'},
  body:JSON.stringify({
    user_id,
    address: wAddress.value,
    memo: wMemo.value
  })
});

const d = await r.json();

if(d.error === "not_activated"){
  alert("âŒ Activate access first (1 TON)");
  return;
}

alert("âœ… Withdraw request sent");
closeWithdraw();
}


function buyAd(amount,link){
fetch(API+"/ad",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id,amount,link})})
.then(r=>r.json()).then(d=>Telegram.WebApp.openTelegramLink(d.pay_url));
}
ads.ad_show({
  adBlockUuid: "c02e76cc-3998-41f4-bf4f-918c25c42796"
});  
</script>
</div>
<script src="https://inapp.telega.io/sdk/v1/sdk.js"></script>
<script>
  const ads = window.TelegaIn.AdsController.create_miniapp({
    token: '0b915dcd-577c-4e52-a1d3-926e467039b5'
  });
</script>
  
</body>
</html>
