<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>FriendPortal</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

html, body {
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #000;
}

body {
  display: flex;
  justify-content: center;
  align-items: center;
}

/* ===== APP ===== */
.app {
  position: relative;
  width: 100%;
  height: 100%;
  max-width: 480px;
  background: url("background.jpg") center / cover no-repeat;
  overflow: hidden;
}

/* ===== LOGO ===== */
.logo {
  position: absolute;
  top: 40px;
  left: 50%;
  transform: translateX(-50%);
  max-width: 85%;
  z-index: 2;
}

/* ===== BUTTONS ===== */
.buttons {
  position: absolute;
  bottom: env(safe-area-inset-bottom);
  left: 0;
  width: 100%;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 3;
}

.btn {
  width: 100%;
  padding: 16px;
  border-radius: 14px;
  border: none;
  font-size: 18px;
  font-weight: 600;
  color: #fff;
  background: linear-gradient(180deg, #5f6bff, #4a56e2);
}

.btn.secondary {
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(6px);
}

/* ===== COINS ===== */
.coin {
  position: absolute;
  width: 56px;
  aspect-ratio: 1 / 1;   /* ğŸ”¥ Ğ¡Ğ¢Ğ ĞĞ“Ğ 1:1 */
  border-radius: 50%;
  background-size: cover;
  background-position: center;
  animation: float linear infinite;
  pointer-events: none;
}

@keyframes float {
  from {
    transform: translateY(110vh) rotate(0deg);
    opacity: 0;
  }
  10% { opacity: 1; }
  to {
    transform: translateY(-120vh) rotate(360deg);
    opacity: 0;
  }
}
</style>
</head>

<body>
<div class="app">

  <img src="logo.png" class="logo" alt="FriendPortal">

  <!-- BUTTONS -->
  <div class="buttons">
    <button class="btn secondary" onclick="invite()">ğŸ‘¥ Invite users</button>
    <button class="btn" onclick="balance()">ğŸ’° Balance</button>
    <button class="btn" onclick="withdraw()">ğŸ’¸ Withdraw</button>
    <button class="btn" onclick="stats()">ğŸ“Š Statistics</button>
    <button class="btn" onclick="how()">â„¹ï¸ How it works</button>
    <button class="btn" onclick="activate()">ğŸ” Activate access</button>
    <button class="btn" onclick="ads()">ğŸ“£ For advertisers</button>
  </div>

</div>

<script>
/* ===== TELEGRAM INIT ===== */
const tg = window.Telegram.WebApp;
tg.ready();
tg.expand();

/* ===== BACKEND ===== */
const API = "https://loyce-taxitic-elenora.ngrok-free.dev";

/* ===== COINS SPAWN ===== */
const coinImages = [
  "coin1.png",
  "coin2.png",
  "coin3.png"
];

function spawnCoin() {
  const coin = document.createElement("div");
  coin.className = "coin";
  coin.style.left = Math.random() * 90 + "%";
  coin.style.animationDuration = (8 + Math.random() * 6) + "s";
  coin.style.backgroundImage =
    `url(${coinImages[Math.floor(Math.random() * coinImages.length)]})`;

  document.querySelector(".app").appendChild(coin);

  setTimeout(() => coin.remove(), 15000);
}

setInterval(spawnCoin, 900);

/* ===== BUTTON ACTIONS ===== */
function invite() {
  tg.openTelegramLink(
    "https://t.me/share/url?url=https://t.me/FriendPortal_bot&text=Join FriendPortal and earn TON!"
  );
}

async function balance() {
  const r = await fetch(API + "/balance", { method: "POST" });
  const d = await r.json();
  alert(`ğŸ’° Balance: ${d.balance} TON\nActivated: ${d.activated}`);
}

async function stats() {
  const r = await fetch(API + "/stats", { method: "POST" });
  const d = await r.json();
  alert(`ğŸ“Š Statistics\nLevel 1: ${d.level1}\nLevel 2: ${d.level2}\nEarned: ${d.earned} TON`);
}

function withdraw() {
  alert("ğŸ’¸ Minimum withdrawal: 5 TON");
}

function how() {
  alert(
    "FriendPortal referral system\n\n" +
    "Level 1: +0.5 TON\n" +
    "Level 2: +0.25 TON\n\n" +
    "Minimum withdrawal: 5 TON"
  );
}

function activate() {
  alert("ğŸ” Activation price: 1 TON\nTON payment will be connected next");
}

function ads() {
  alert(
    "ğŸ“£ Advertising packages:\n\n" +
    "25 TON â€” broadcast\n" +
    "75 TON â€” top button\n" +
    "250 TON â€” top placement"
  );
}
</script>
</body>
</html>
